{% extends 'base.html' %}
{% block content %}

{% if category_posts %}

<div class="container-fluid">
    <h2 class ="title">{{ cats }}</h2>
        <div class="row">
            {% for post in category_posts %}
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="image-container">
                            {% if "placeholder" in post.featured_image.url %}
                            <img class="card-img-top"
                                src="https://codeinstitute.s3.amazonaws.com/fullstack/blog/default.jpg">
                            {% else %}
                            <img class="card-img-top" src=" {{ post.featured_image.url }}">
                            {% endif %}
                        </div>                    
                            <h2 class="card-title">{{ post.title }}</h2>
                            <small>
                                <em>{{ post.author.first_name }} </em>
                                <em>{{ post.author.last_name }}</em> -
                                <em>{{ post.created_on }} </em>
                            </small>
                            <br/>
                            
                           <!--  <p class="card-text">{{ post.excerpt }}</p>-->
                            <small>
                                {% if user.is_authenticated %}
                                    {% if user.id == post.author.id %}
                                        <a href="{% url 'edit_post' post.pk %}">(Edit)</a>
                                        <a href="{% url 'delete_post' post.pk %}">(Delete)</a>
                                    {% else %}
                                        You are not allowed here!!
                                    {% endif %}
                                {% endif %}
                                </small>
                                <br/>      
                        {{ post.content| slice:":200" }}<a href = "{% url 'article-detail' post.pk %}"> more...</small></a> 
                       
                        <hr />
                        <p class="card-text text-muted h6"><i class="far fa-heart"></i>
                         {{ post.number_of_likes }}<i class="far fa-thumbs-down"></i>{{ post.number_of_dislikes }}<i class="fas fa-share"></i>{{ post.number_of_shares }}</p> 
    
                    </div>
                </div>
            </div>
            {% if forloop.counter|divisibleby:3 %}
        </div>
        <div class="row">
            {% endif %}
            {% endfor %}
    
        </div>
    </div>
    </div>
    {% if is_paginated %}
    <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
        <li><a href="?page={{ page_obj.previous_page_number }}" class="page-link">&laquo; PREV </a></li>
        {% endif %}
        {% if page_obj.has_next %}
        <li><a href="?page={{ page_obj.next_page_number }}" class="page-link"> NEXT &raquo;</a></li>
    
        {% endif %}
    </ul>
    </nav>
    {% endif %}
    </div>
    
  




<!--

<h2 class ="title">{{ cats }}</h2>
<ul>
{% for post in category_posts %}
<li class = "category"><b>{{ post.title }} -</b>
            <em><small>{{ post.author.first_name }} </em></small>
            <em><small>{{ post.author.last_name }}</em> -</small>
            <em><small>{{ post.created_on }} </em></small>
        <small>
            {% if user.is_authenticated %}
                {% if user.id == post.author.id %}
                    <a href="{% url 'edit_post' post.pk %}">(Edit)</a>
                    <a href="{% url 'delete_post' post.pk %}">(Delete)</a>
                {% else %}
                    You are not allowed here!!
                {% endif %}
            {% endif %}
        </small><br/>  
        <em>{{ post.content| slice:":300" }}</em><a href = "{% url 'article-detail' post.pk %}">     more...</small></a>        
</li>
{% endfor %}
</ul>  
{% else %}
<h2>the page does not exist</h2>
{% endif %}

-->
 {% endblock %}                       
                                
                    
                   




